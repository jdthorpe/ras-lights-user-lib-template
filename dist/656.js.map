{"version":3,"file":"656.js","mappings":"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","sources":["webpack://ras-lights-user-demo/./bootstrap.ts","webpack://ras-lights-user-demo/./register.ts","webpack://ras-lights-user-demo/./src/index.ts","webpack://ras-lights-user-demo/./src/marquee-bounce.ts","webpack://ras-lights-user-demo/./src/marquee.ts","webpack://ras-lights-user-demo/./src/razzle-dazzle.ts","webpack://ras-lights-user-demo/./src/rgb-plus-w.ts","webpack://ras-lights-user-demo/./src/smooth-to.ts","webpack://ras-lights-user-demo/./src/utils.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.load = void 0;\nconst register_1 = require(\"./register\");\n// expose the definitions to backends\nfunction load(cb) {\n    for (let d of register_1.defs)\n        cb(d);\n}\nexports.load = load;\n// yes, this import should come last\nrequire(\"./src/index\");\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.register = exports.defs = void 0;\nexports.defs = [];\nfunction register(x) {\n    exports.defs.push(x);\n}\nexports.register = register;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nrequire(\"./razzle-dazzle\");\nrequire(\"./rgb-plus-w\");\nrequire(\"./marquee\");\nrequire(\"./marquee-bounce\");\nrequire(\"./smooth-to\");\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst register_1 = require(\"../register\");\nfunction effect(x) {\n    // initialization\n    if (typeof this.i === \"undefined\") {\n        // time accounting\n        this.prev_time = +new Date();\n        this.frac = 0;\n        // start state\n        this.i = 0;\n        this.dir = 1;\n    }\n    else {\n        //  time accounting\n        const now = +new Date();\n        const delta = this.frac + (x.rate * (now - this.prev_time)) / 1000;\n        // next state\n        this.prev_time = now;\n        this.frac = delta % 1;\n        // action\n        if (delta > 1) {\n            if (this.i >= x.count - 1) {\n                this.dir = -1;\n            }\n            else if (this.i <= 0) {\n                this.dir = 1;\n            }\n            this.i += this.dir;\n        }\n    }\n    // return value\n    const out = new Array(x.count).fill(0);\n    out[this.i] = 255;\n    return out;\n}\n(0, register_1.register)({\n    /* Effect Name */\n    name: \"Marquee Bounce\",\n    /* Effect Function */\n    func: effect,\n    /* Effect Inputs */\n    input: [\n        {\n            key: \"count\",\n            type: \"integer\",\n            label: \"Width\",\n            default: 5,\n            min: 1,\n            max: 100,\n        },\n        {\n            key: \"rate\",\n            type: \"number\",\n            label: \"Rate\",\n            default: 3,\n            min: 1,\n            max: 100,\n        },\n    ],\n    /* Effect Output Type */\n    output: \"number[]\",\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst register_1 = require(\"../register\");\nfunction effect(x) {\n    // initialization\n    if (typeof this.i === \"undefined\") {\n        // start state\n        this.i = 0;\n        // time accounting\n        this.prev_time = +new Date();\n        this.frac = 0;\n    }\n    else {\n        //  time accounting\n        const now = +new Date();\n        const delta = this.frac + (x.rate * (now - this.prev_time)) / 1000;\n        this.i = (this.i + Math.floor(delta)) % x.count;\n        this.prev_time = now;\n        this.frac = delta % 1;\n    }\n    const out = new Array(x.count).fill(0);\n    out[this.i] = 255;\n    return out;\n}\n(0, register_1.register)({\n    /* Effect Name */\n    name: \"Marquee\",\n    /* Effect Function */\n    func: effect,\n    /* Effect Inputs */\n    input: [\n        {\n            key: \"count\",\n            type: \"integer\",\n            label: \"Width\",\n            default: 5,\n            min: 1,\n            max: 100,\n        },\n        {\n            key: \"rate\",\n            type: \"number\",\n            label: \"Rate\",\n            default: 3,\n            min: 1,\n            max: 100,\n        },\n    ],\n    /* Effect Output Type */\n    output: \"number[]\",\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst register_1 = require(\"../register\");\nfunction effect(x, globals) {\n    if (typeof this.state === \"undefined\") {\n        this.state = new Array(globals.leds).fill(0);\n        this.prev_time = +new Date();\n        this.frac = 0;\n        return this.state;\n    }\n    const now = +new Date();\n    let delta = this.frac + (x.rate * (now - this.prev_time)) / 1000;\n    while (delta > 1) {\n        delta -= 1;\n        let i = Math.floor(Math.random() * globals.leds);\n        this.state[i] = this.state[i] === 0 ? 255 : 0;\n    }\n    this.prev_time = now;\n    this.frac = delta;\n    return this.state;\n}\n(0, register_1.register)({\n    /* Effect Name */\n    name: \"Razzle Dazzle\",\n    /* Effect Function */\n    func: effect,\n    /* Effect Inputs */\n    input: [\n        {\n            key: \"rate\",\n            type: \"number\",\n            label: \"Speed (count/second)\",\n            default: 5,\n            min: 1,\n            max: 1000,\n        },\n    ],\n    /* Effect Output Type */\n    output: \"number[]\",\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst register_1 = require(\"../register\");\nfunction effect(x, globals) {\n    const { rgb, w } = x;\n    const out = new Array(globals.leds);\n    for (let i = 0; i < globals.leds; i++)\n        out[i] = [...rgb[i % rgb.length], w[i % w.length]];\n    return out;\n}\n(0, register_1.register)({\n    /* Effect Name */\n    name: \"RGB+W\",\n    /* Effect Function */\n    func: effect,\n    /* Effect Inputs */\n    input: [\n        {\n            key: \"rgb\",\n            type: \"rgb[]\",\n            label: \"RGB\",\n            default: [\n                [0, 0, 255],\n                [0, 255, 255],\n                [100, 0, 255],\n            ],\n        },\n        {\n            key: \"w\",\n            type: \"number[]\",\n            label: \"W\",\n            default: [0, 63, 127, 191, 255],\n        },\n    ],\n    /* Effect Output Type */\n    output: \"rgbw[]\",\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst register_1 = require(\"../register\");\nconst utils_1 = require(\"./utils\");\nfunction effect(x, globals) {\n    if (typeof this.from === \"undefined\") {\n        console.log(\"smooth to globals\", JSON.stringify(globals));\n        console.dir(globals);\n        this.from = (globals.prev && globals.prev.map(utils_1.asRGBW)) || [\n            [0, 0, 0, 0],\n        ];\n        this.start_time = +new Date();\n        this.stopped = false;\n    }\n    if (this.stopped) {\n        console.log(\"stop\");\n        globals.stop();\n    }\n    const now = +new Date();\n    if (now - this.start_time > x.fade_time) {\n        this.stopped = true;\n        return [x.to];\n    }\n    return this.from.map((f) => (0, utils_1.average)(f, x.to, (now - this.start_time) / x.fade_time));\n}\n(0, register_1.register)({\n    /* Effect Name */\n    name: \"SmoothTo\",\n    /* Effect Function */\n    func: effect,\n    /* Effect Inputs */\n    input: [\n        {\n            key: \"to\",\n            type: \"rgbw\",\n            label: \"To\",\n            default: [0, 0, 255, 127],\n        },\n        {\n            key: \"fade_time\",\n            type: \"number\",\n            label: \"Fade Time (ms)\",\n            default: 500,\n            min: 1,\n            max: 10000,\n        },\n    ],\n    /* Effect Output Type */\n    output: \"rgbw[]\",\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.asRGBW = exports.average = void 0;\nfunction _average(a, b, w) {\n    // utility function\n    return Math.floor(a * (1 - w) + b * w);\n}\nfunction average(a, b, w) {\n    if (typeof a === \"number\")\n        return _average(a, b, w);\n    if (a.length === 3)\n        return [\n            Math.floor(a[0] * (1 - w) + b[0] * w),\n            Math.floor(a[1] * (1 - w) + b[1] * w),\n            Math.floor(a[2] * (1 - w) + b[2] * w),\n        ];\n    return [\n        Math.floor(a[0] * (1 - w) + b[0] * w),\n        Math.floor(a[1] * (1 - w) + b[1] * w),\n        Math.floor(a[2] * (1 - w) + b[2] * w),\n        Math.floor(a[3] * (1 - w) + b[3] * w),\n    ];\n}\nexports.average = average;\nfunction asRGBW(a) {\n    if (typeof a === \"number\")\n        return [0, 0, 0, a];\n    if (a.length === 4)\n        return a;\n    return [...a, 0];\n}\nexports.asRGBW = asRGBW;\n"],"names":["Object","defineProperty","exports","value","load","register_1","cb","d","defs","register","x","push","name","func","this","i","prev_time","Date","frac","dir","now","delta","rate","count","out","Array","fill","input","key","type","label","default","min","max","output","Math","floor","globals","state","leds","random","rgb","w","length","utils_1","from","console","log","JSON","stringify","prev","map","asRGBW","start_time","stopped","stop","fade_time","to","f","average","a","b","_average"],"sourceRoot":""}