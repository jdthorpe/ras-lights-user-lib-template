{"version":3,"file":"main.js","mappings":"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","sources":["webpack://ras-lights-user-demo/./register.ts","webpack://ras-lights-user-demo/./src/index.ts","webpack://ras-lights-user-demo/./src/marquee.ts","webpack://ras-lights-user-demo/./src/razzle-dazzle.ts","webpack://ras-lights-user-demo/./src/rgb-plus-w.ts","webpack://ras-lights-user-demo/webpack/bootstrap","webpack://ras-lights-user-demo/./bootstrap.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.register = exports.defs = void 0;\nexports.defs = [];\nfunction register(x) {\n    exports.defs.push(x);\n}\nexports.register = register;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nrequire(\"./razzle-dazzle\");\nrequire(\"./rgb-plus-w\");\nrequire(\"./marquee\");\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst register_1 = require(\"../register\");\nfunction effect(x) {\n    // initialization\n    if (typeof this.i === \"undefined\") {\n        // start state\n        this.i = 0;\n        // time accounting\n        this.prev_time = +new Date();\n        this.frac = 0;\n    }\n    else {\n        //  time accounting\n        const now = +new Date();\n        const delta = this.frac + (x.rate * (now - this.prev_time)) / 1000;\n        console.log(delta, this.frac);\n        this.i += Math.floor(delta) % x.count;\n        this.prev_time = now;\n        this.frac = delta % 1;\n    }\n    const out = new Array(x.count).fill(0);\n    out[this.i] = 255;\n    return out;\n}\n(0, register_1.register)({\n    /* Effect Name */\n    name: \"Marquee\",\n    /* Effect Function */\n    func: effect,\n    /* Effect Inputs */\n    input: [\n        {\n            key: \"count\",\n            type: \"integer\",\n            label: \"Width\",\n            default: 5,\n            min: 1,\n            max: 100,\n        },\n        {\n            key: \"rate\",\n            type: \"number\",\n            label: \"Rate\",\n            default: 1,\n            min: 0.01,\n            max: 10,\n        },\n    ],\n    /* Effect Output Type */\n    output: \"number[]\",\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst register_1 = require(\"../register\");\nfunction effect(x, globals) {\n    if (typeof this.state === \"undefined\") {\n        this.state = new Array(globals.leds).fill(0);\n        this.prev_time = +new Date();\n        this.frac = 0;\n        return this.state;\n    }\n    const now = +new Date();\n    let delta = this.frac + (x.rate * (now - this.prev_time)) / 1000;\n    while (delta > 1) {\n        delta -= 1;\n        let i = Math.floor(Math.random() * globals.leds);\n        this.state[i] = this.state[i] === 0 ? 255 : 0;\n    }\n    this.prev_time = now;\n    this.frac = delta;\n    return this.state;\n}\n(0, register_1.register)({\n    /* Effect Name */\n    name: \"Razzle Dazzle\",\n    /* Effect Function */\n    func: effect,\n    /* Effect Inputs */\n    input: [\n        {\n            key: \"rate\",\n            type: \"number\",\n            label: \"Speed (count/second)\",\n            default: 5,\n            min: 1,\n            max: 1000,\n        },\n    ],\n    /* Effect Output Type */\n    output: \"number[]\",\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst register_1 = require(\"../register\");\nfunction effect(x, globals) {\n    const { rgb, w } = x;\n    const out = new Array(globals.leds);\n    for (let i = 0; i < globals.leds; i++)\n        out[i] = [...rgb[i % rgb.length], w[i % w.length]];\n    return out;\n}\n(0, register_1.register)({\n    /* Effect Name */\n    name: \"RGB+W\",\n    /* Effect Function */\n    func: effect,\n    /* Effect Inputs */\n    input: [\n        {\n            key: \"rgb\",\n            type: \"rgb[]\",\n            label: \"RGB\",\n            default: [\n                [0, 0, 255],\n                [0, 255, 255],\n                [100, 0, 255],\n            ],\n        },\n        {\n            key: \"w\",\n            type: \"number[]\",\n            label: \"W\",\n            default: [0, 63, 127, 191, 255],\n        },\n    ],\n    /* Effect Output Type */\n    output: \"rgbw[]\",\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.load = void 0;\nconst register_1 = require(\"./register\");\n// expose the definitions to backends\nfunction load(cb) {\n    for (let d of register_1.defs)\n        cb(d);\n}\nexports.load = load;\n// yes, this import should come last\nrequire(\"./src/index\");\n"],"names":["Object","defineProperty","exports","value","register","defs","x","push","name","func","this","i","prev_time","Date","frac","now","delta","rate","console","log","Math","floor","count","out","Array","fill","input","key","type","label","default","min","max","output","globals","state","leds","random","rgb","w","length","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__"],"sourceRoot":""}